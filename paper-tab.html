<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!--
`paper-tab` is styled to look like a tab.  It should be used in conjunction with
`paper-tabs`.

Example:

    <paper-tabs selected="0">
      <paper-tab>TAB 1</paper-tab>
      <paper-tab>TAB 2</paper-tab>
      <paper-tab>TAB 3</paper-tab>
    </paper-tabs>

@group Quantum Paper Elements
@element paper-tab
@homepage github.io
-->

<link rel="import" href="../paper-ink/paper-ink.html">

<polymer-element name="paper-tab" attributes="noink">
<template>

  <link rel="stylesheet" href="paper-tab.css">
  <link rel="stylesheet" href="../core-layout/core-layout.css">
  
  <div id="tabContainer" class="core-h core-justify-center core-align-center">
    
    <div class="tab-content"><content></content></div>
  
    <paper-ink id="ink" color="#E0F795" on-paper-ink-spill-complete="{{spillComplete}}"></paper-ink>
    
  </div>
  
</template>
<script>

  Polymer('paper-tab', {
    
    /**
     * If true, ink effect is disabled.
     *
     * @attribute noink
     * @type boolean
     * @default false
     */
    noink: false,
    
    eventDelegates: {
      down: 'spill'
    },
    
    spill: function(e) {
      if (this.noink || this.parentNode && this.parentNode.noink) {
        return;
      }
      var r = this.$.tabContainer.getBoundingClientRect();
      var w = r.width * 2;
      var s = this.$.ink.style;
      s.top = e.y - r.top - w/2 + 'px';
      s.left = e.x - r.left - w/2 + 'px';
      s.width = s.height = w + 'px';
      this.async(function() {
        this.$.ink.spill();
      });
    },
    
    spillComplete: function() {
      this.$.ink.evaporate();
    }
    
  });
  
</script>
</polymer-element>
